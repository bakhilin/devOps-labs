{"ast":null,"code":"var _jsxFileName = \"/home/nikita/Desktop/devOps-labs/lab5/react-frontend/src/components/root/users/business/Offer/CreateOffer.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport OfferInputField from \"./fields/OfferInputField\";\nimport OfferTextaria from \"./fields/OfferTextaria\";\nimport Footer from \"../../../fragments/footer/Footer\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport AuthenticationService from \"../../../../../api/authentication/AuthenticationService\";\nimport CreateOfferDataService from \"../../../../../api/hobby/CreateOfferDataService\";\nimport { useState, useEffect } from \"react\";\nimport styles from \"../../../../../css/CreateOffer.module.css\";\nimport style from \"../../../../../css/Footer.module.css\";\nimport LoadingDots from \"./animation/LoadingDots\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CreateOffer = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const username = AuthenticationService.getLoggedInUser();\n  const [uploaded, setUploaded] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [files, setFiles] = useState({});\n  const [info, setInfo] = useState({\n    name: \"\",\n    slogan: \"\",\n    category: \"\",\n    intro: \"\",\n    description: \"\",\n    price: \"\",\n    creator: username,\n    location: \"\",\n    profileImgUrl: \"\",\n    galleryImgUrl1: \"\",\n    galleryImgUrl2: \"\",\n    galleryImgUrl3: \"\",\n    contactInfo: \"\"\n  });\n  const [errors, setErrors] = useState({});\n\n  const validate = () => {\n    const errors = {};\n\n    if (!files.profileImgUrl) {\n      errors.profileImgUrl = \"Profile photo is required\";\n    }\n\n    if (!info.name) {\n      errors.name = \"Hobby name is required\";\n    } else if (info.name.length < 3) {\n      errors.name = \"Hobby name must be at least 3 characters long\";\n    }\n\n    if (!info.slogan) {\n      errors.slogan = \"Slogan is required\";\n    } else if (info.slogan.length < 2 || info.slogan.length > 20) {\n      errors.slogan = \"Text has to be between 2 and 20 characters long\";\n    }\n\n    if (!info.category) {\n      errors.category = \"Category is required\";\n    }\n\n    if (!info.intro) {\n      errors.intro = \"Intro is required\";\n    } else if (info.intro.length > 900) {\n      errors.intro = \"Text has to be maximum 900 characters long\";\n    }\n\n    if (!info.description) {\n      errors.description = \"Description is required\";\n    } else if (info.description.length > 900) {\n      errors.description = \"Text has to be maximum 900 characters long\";\n    }\n\n    if (!info.price) {\n      errors.price = \"Price is required\";\n    }\n\n    if (!info.location) {\n      errors.location = \"Location is required\";\n    }\n\n    if (!files.galleryImgUrl1) {\n      errors.galleryImgUrl1 = \"You must upload 3 high quality photos\";\n    }\n\n    if (!files.galleryImgUrl2) {\n      errors.galleryImgUrl2 = \"You must upload 3 high quality photos\";\n    }\n\n    if (!files.galleryImgUrl3) {\n      errors.galleryImgUrl3 = \"You must upload 3 high quality photos\";\n    }\n\n    if (!info.contactInfo) {\n      errors.contactInfo = \"Contact info is required\";\n    } else if (info.contactInfo.length < 20 || info.contactInfo.length > 900) {\n      errors.contactInfo = \"Text has to be between 20 and 900 characters long\";\n    }\n\n    return errors;\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n    const img_urls = [];\n    const public_ids = [];\n    let fileURL = \"\";\n    let errors = validate(info);\n    setErrors(errors);\n\n    if (Object.keys(errors).length === 0) {\n      setLoading(true);\n      const filesToUpload = [files.profileImgUrl, files.galleryImgUrl1, files.galleryImgUrl2, files.galleryImgUrl3];\n      const uploaders = filesToUpload.map(async file => {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"tags\", `dv6ktrxwv, hobbie`);\n        formData.append(\"upload_preset\", \"vgf01lnc\");\n        formData.append(\"timestamp\", Date.now() / 1000 | 0);\n        return await axios.post(\"https://api.cloudinary.com/v1_1/dv6ktrxwv/image/upload\", formData, {\n          headers: {\n            \"X-Requested-With\": \"XMLHttpRequest\"\n          }\n        }).then(_ref => {\n          let {\n            data\n          } = _ref;\n          fileURL = data.secure_url;\n          const public_id = data.public_id;\n          img_urls.push(fileURL);\n          public_ids.push(public_id);\n        });\n      }); // Once all the files are uploaded\n\n      axios.all(uploaders).then(() => {\n        console.log(img_urls[0]);\n        setInfo(prevState => ({ ...prevState,\n          profileImgUrl: img_urls[0],\n          galleryImgUrl1: img_urls[1],\n          galleryImgUrl2: img_urls[2],\n          galleryImgUrl3: img_urls[3],\n          profileImg_id: public_ids[0],\n          galleryImg1_id: public_ids[1],\n          galleryImg2_id: public_ids[2],\n          galleryImg3_id: public_ids[3]\n        }));\n        setUploaded(true);\n      });\n    } else {\n      console.log(errors);\n    }\n  };\n\n  useEffect(() => {\n    const check_uploaded = () => {\n      if (uploaded) {\n        CreateOfferDataService(info).then(res => {\n          if (res.data != null) {\n            window.location.href = \"/business-home\";\n          }\n        }).catch(err => {\n          let error = \"\";\n\n          if (err.response) {\n            error += err.response;\n          }\n\n          return error;\n        });\n      }\n    };\n\n    check_uploaded();\n  }, [uploaded, info, navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.offer_main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title_offer,\n        children: \"Create offer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form_offer,\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(OfferInputField, {\n          type: \"text\",\n          placeholder: \"ex: Painting, Swimming classes etc..\",\n          label: \"Hobbie Name\",\n          name: \"name\",\n          error: errors.name,\n          onChange: e => setInfo({ ...info,\n            name: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OfferInputField, {\n          type: \"text\",\n          placeholder: \"your offer in one sentence...\",\n          label: \"Slogan\",\n          name: \"slogan\",\n          error: errors.slogan,\n          onChange: e => setInfo({ ...info,\n            slogan: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form_field_2,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => setInfo({ ...info,\n              category: e.target.value\n            }),\n            className: styles.custom_select,\n            id: \"category\",\n            name: \"category\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ACTIVE\",\n              children: \"Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"SOCIAL\",\n              children: \"Social\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"FUN\",\n              children: \"Fun\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"RELAX\",\n              children: \"Relax\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"INTELLECTUAL\",\n              children: \"Intellectual\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"CREATIVE\",\n              children: \"Creative\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"OTHER\",\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), errors.category && /*#__PURE__*/_jsxDEV(\"small\", {\n            className: styles.errors_offer,\n            children: errors.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OfferTextaria, {\n          label: \"Intro\",\n          name: \"intro\",\n          error: errors.intro,\n          onChange: e => setInfo({ ...info,\n            intro: e.target.value.replace(/\\n\\r?/g, \"\\n\")\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OfferTextaria, {\n          label: \"Description\",\n          name: \"description\",\n          error: errors.description,\n          onChange: e => setInfo({ ...info,\n            description: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OfferInputField, {\n          type: \"number\",\n          placeholder: \"\",\n          label: \"Price per entry\",\n          name: \"price\",\n          error: errors.price,\n          onChange: e => setInfo({ ...info,\n            price: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form_field_2,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => setInfo({ ...info,\n              location: e.target.value\n            }),\n            className: styles.custom_select,\n            id: \"location\",\n            name: \"location\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ZURICH\",\n              children: \"Zurich\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"BERN\",\n              children: \"Bern\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ZUG\",\n              children: \"Zug\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"LUZERN\",\n              children: \"Luzern\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), errors.location && /*#__PURE__*/_jsxDEV(\"small\", {\n            className: styles.errors_offer,\n            children: errors.location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form_field_photos,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.row_upload,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              id: \"photo\",\n              className: styles.label_name,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"\",\n                children: \"Gallery\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n              className: styles.button3,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.choose_file,\n                children: [\" \", files.profileImgUrl ? \"Photo uploaded\" : \"Choose a file\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setFiles({ ...files,\n                  profileImgUrl: e.target.files[0]\n                }),\n                type: \"file\",\n                id: \"add-title-image\",\n                name: \"img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n              className: styles.button3,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.choose_file,\n                children: [\" \", files.galleryImgUrl1 ? \"Photo uploaded\" : \"Choose a file\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setFiles({ ...files,\n                  galleryImgUrl1: e.target.files[0]\n                }),\n                type: \"file\",\n                id: \"add-title-image\",\n                name: \"img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n              className: styles.button3,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.choose_file,\n                children: [\" \", files.galleryImgUrl2 ? \"Photo uploaded\" : \"Choose a file\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setFiles({ ...files,\n                  galleryImgUrl2: e.target.files[0]\n                }),\n                type: \"file\",\n                id: \"add-title-image\",\n                name: \"img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n              className: styles.button3,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.choose_file,\n                children: [\" \", files.galleryImgUrl3 ? \"Photo uploaded\" : \"Choose a file\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setFiles({ ...files,\n                  galleryImgUrl3: e.target.files[0]\n                }),\n                type: \"file\",\n                id: \"add-title-image\",\n                name: \"img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), (errors.galleryImgUrl1 || errors.galleryImgUrl2 || errors.galleryImgUrl3 || errors.profileImgUrl) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.errors_offer,\n              children: \"You must upload high quality photos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OfferTextaria, {\n          label: \"Contact info\",\n          name: \"contact\",\n          error: errors.contactInfo,\n          onChange: e => setInfo({ ...info,\n            contactInfo: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(LoadingDots, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 23\n        }, this), !loading && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.submit_offer,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {\n      class: style.footer_hobbie_details\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(CreateOffer, \"hlkfqrkuz+2sZEwDMBWsTJeBMPY=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateOffer;\nexport default CreateOffer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateOffer\");","map":{"version":3,"sources":["/home/nikita/Desktop/devOps-labs/lab5/react-frontend/src/components/root/users/business/Offer/CreateOffer.jsx"],"names":["React","OfferInputField","OfferTextaria","Footer","useNavigate","axios","AuthenticationService","CreateOfferDataService","useState","useEffect","styles","style","LoadingDots","CreateOffer","navigate","username","getLoggedInUser","uploaded","setUploaded","loading","setLoading","files","setFiles","info","setInfo","name","slogan","category","intro","description","price","creator","location","profileImgUrl","galleryImgUrl1","galleryImgUrl2","galleryImgUrl3","contactInfo","errors","setErrors","validate","length","submitHandler","event","preventDefault","img_urls","public_ids","fileURL","Object","keys","filesToUpload","uploaders","map","file","formData","FormData","append","Date","now","post","headers","then","data","secure_url","public_id","push","all","console","log","prevState","profileImg_id","galleryImg1_id","galleryImg2_id","galleryImg3_id","check_uploaded","res","window","href","catch","err","error","response","offer_main","title_offer","form_offer","e","target","value","form_field_2","custom_select","errors_offer","replace","form_field_photos","row_upload","label_name","button3","choose_file","submit_offer","footer_hobbie_details"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport OfferInputField from \"./fields/OfferInputField\";\nimport OfferTextaria from \"./fields/OfferTextaria\";\nimport Footer from \"../../../fragments/footer/Footer\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport AuthenticationService from \"../../../../../api/authentication/AuthenticationService\";\nimport CreateOfferDataService from \"../../../../../api/hobby/CreateOfferDataService\";\nimport { useState, useEffect } from \"react\";\nimport styles from \"../../../../../css/CreateOffer.module.css\";\nimport style from \"../../../../../css/Footer.module.css\";\nimport LoadingDots from \"./animation/LoadingDots\";\n\nconst CreateOffer = () => {\n  const navigate = useNavigate();\n  const username = AuthenticationService.getLoggedInUser();\n  const [uploaded, setUploaded] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const [files, setFiles] = useState({});\n  const [info, setInfo] = useState({\n    name: \"\",\n    slogan: \"\",\n    category: \"\",\n    intro: \"\",\n    description: \"\",\n    price: \"\",\n    creator: username,\n    location: \"\",\n    profileImgUrl: \"\",\n    galleryImgUrl1: \"\",\n    galleryImgUrl2: \"\",\n    galleryImgUrl3: \"\",\n    contactInfo: \"\",\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const validate = () => {\n    const errors = {};\n\n    if (!files.profileImgUrl) {\n      errors.profileImgUrl = \"Profile photo is required\";\n    }\n    if (!info.name) {\n      errors.name = \"Hobby name is required\";\n    } else if (info.name.length < 3) {\n      errors.name = \"Hobby name must be at least 3 characters long\";\n    }\n\n    if (!info.slogan) {\n      errors.slogan = \"Slogan is required\";\n    } else if (info.slogan.length < 2 || info.slogan.length > 20) {\n      errors.slogan = \"Text has to be between 2 and 20 characters long\";\n    }\n\n    if (!info.category) {\n      errors.category = \"Category is required\";\n    }\n\n    if (!info.intro) {\n      errors.intro = \"Intro is required\";\n    } else if (info.intro.length > 900) {\n      errors.intro = \"Text has to be maximum 900 characters long\";\n    }\n\n    if (!info.description) {\n      errors.description = \"Description is required\";\n    } else if (info.description.length > 900) {\n      errors.description = \"Text has to be maximum 900 characters long\";\n    }\n\n    if (!info.price) {\n      errors.price = \"Price is required\";\n    }\n\n    if (!info.location) {\n      errors.location = \"Location is required\";\n    }\n    if (!files.galleryImgUrl1) {\n      errors.galleryImgUrl1 = \"You must upload 3 high quality photos\";\n    }\n    if (!files.galleryImgUrl2) {\n      errors.galleryImgUrl2 = \"You must upload 3 high quality photos\";\n    }\n    if (!files.galleryImgUrl3) {\n      errors.galleryImgUrl3 = \"You must upload 3 high quality photos\";\n    }\n\n    if (!info.contactInfo) {\n      errors.contactInfo = \"Contact info is required\";\n    } else if (info.contactInfo.length < 20 || info.contactInfo.length > 900) {\n      errors.contactInfo = \"Text has to be between 20 and 900 characters long\";\n    }\n    return errors;\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const img_urls = [];\n    const public_ids = [];\n    let fileURL = \"\";\n    let errors = validate(info);\n    setErrors(errors);\n    if (Object.keys(errors).length === 0) {\n      setLoading(true);\n      const filesToUpload = [\n        files.profileImgUrl,\n        files.galleryImgUrl1,\n        files.galleryImgUrl2,\n        files.galleryImgUrl3,\n      ];\n      const uploaders = filesToUpload.map(async (file) => {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"tags\", `dv6ktrxwv, hobbie`);\n        formData.append(\"upload_preset\", \"vgf01lnc\");\n        formData.append(\"timestamp\", (Date.now() / 1000) | 0);\n\n        return await axios\n          .post(\n            \"https://api.cloudinary.com/v1_1/dv6ktrxwv/image/upload\",\n            formData,\n            {\n              headers: { \"X-Requested-With\": \"XMLHttpRequest\" },\n            }\n          )\n          .then(({ data }) => {\n            fileURL = data.secure_url;\n            const public_id = data.public_id;\n            img_urls.push(fileURL);\n            public_ids.push(public_id);\n          });\n      });\n\n      // Once all the files are uploaded\n      axios.all(uploaders).then(() => {\n        console.log(img_urls[0]);\n        setInfo((prevState) => ({\n          ...prevState,\n          profileImgUrl: img_urls[0],\n          galleryImgUrl1: img_urls[1],\n          galleryImgUrl2: img_urls[2],\n          galleryImgUrl3: img_urls[3],\n          profileImg_id: public_ids[0],\n          galleryImg1_id: public_ids[1],\n          galleryImg2_id: public_ids[2],\n          galleryImg3_id: public_ids[3],\n        }));\n        setUploaded(true);\n      });\n    } else {\n      console.log(errors);\n    }\n  };\n\n  useEffect(() => {\n    const check_uploaded = () => {\n      if (uploaded) {\n        CreateOfferDataService(info)\n          .then((res) => {\n            if (res.data != null) {\n              window.location.href = \"/business-home\";\n            }\n          })\n          .catch((err) => {\n            let error = \"\";\n\n            if (err.response) {\n              error += err.response;\n            }\n            return error;\n          });\n      }\n    };\n    check_uploaded();\n  }, [uploaded, info, navigate]);\n\n  return (\n    <>\n      <main className={styles.offer_main}>\n        <h1 className={styles.title_offer}>Create offer</h1>\n        <form className={styles.form_offer} onSubmit={submitHandler}>\n          <OfferInputField\n            type=\"text\"\n            placeholder=\"ex: Painting, Swimming classes etc..\"\n            label=\"Hobbie Name\"\n            name=\"name\"\n            error={errors.name}\n            onChange={(e) => setInfo({ ...info, name: e.target.value })}\n          />\n          <OfferInputField\n            type=\"text\"\n            placeholder=\"your offer in one sentence...\"\n            label=\"Slogan\"\n            name=\"slogan\"\n            error={errors.slogan}\n            onChange={(e) => setInfo({ ...info, slogan: e.target.value })}\n          />\n\n          <div className={styles.form_field_2}>\n            <span>Category</span>\n            <select\n              onChange={(e) => setInfo({ ...info, category: e.target.value })}\n              className={styles.custom_select}\n              id=\"category\"\n              name=\"category\"\n            >\n              <option value=\"\">Select category</option>\n              <option value=\"ACTIVE\">Active</option>\n              <option value=\"SOCIAL\">Social</option>\n              <option value=\"FUN\">Fun</option>\n              <option value=\"RELAX\">Relax</option>\n              <option value=\"INTELLECTUAL\">Intellectual</option>\n              <option value=\"CREATIVE\">Creative</option>\n              <option value=\"OTHER\">Other</option>\n            </select>\n            {errors.category && (\n              <small className={styles.errors_offer}>{errors.category}</small>\n            )}\n          </div>\n\n          <OfferTextaria\n            label=\"Intro\"\n            name=\"intro\"\n            error={errors.intro}\n            onChange={(e) =>\n              setInfo({\n                ...info,\n                intro: e.target.value.replace(/\\n\\r?/g, \"\\n\"),\n              })\n            }\n          />\n\n          <OfferTextaria\n            label=\"Description\"\n            name=\"description\"\n            error={errors.description}\n            onChange={(e) => setInfo({ ...info, description: e.target.value })}\n          />\n\n          <OfferInputField\n            type=\"number\"\n            placeholder=\"\"\n            label=\"Price per entry\"\n            name=\"price\"\n            error={errors.price}\n            onChange={(e) => setInfo({ ...info, price: e.target.value })}\n          />\n\n          <div className={styles.form_field_2}>\n            <span>Location</span>\n            <select\n              onChange={(e) => setInfo({ ...info, location: e.target.value })}\n              className={styles.custom_select}\n              id=\"location\"\n              name=\"location\"\n            >\n              <option value=\"\">Select location</option>\n              <option value=\"ZURICH\">Zurich</option>\n              <option value=\"BERN\">Bern</option>\n              <option value=\"ZUG\">Zug</option>\n              <option value=\"LUZERN\">Luzern</option>\n            </select>\n            {errors.location && (\n              <small className={styles.errors_offer}>{errors.location}</small>\n            )}\n          </div>\n\n          <div className={styles.form_field_photos}>\n            <div className={styles.row_upload}>\n              <label id=\"photo\" className={styles.label_name}>\n                <span className=\"\">Gallery</span>\n              </label>\n              <article className={styles.button3}>\n                <p className={styles.choose_file}>\n                  {\" \"}\n                  {files.profileImgUrl ? \"Photo uploaded\" : \"Choose a file\"}\n                </p>\n                <input\n                  onChange={(e) =>\n                    setFiles({ ...files, profileImgUrl: e.target.files[0] })\n                  }\n                  type=\"file\"\n                  id=\"add-title-image\"\n                  name=\"img\"\n                />\n              </article>\n              <article className={styles.button3}>\n                <p className={styles.choose_file}>\n                  {\" \"}\n                  {files.galleryImgUrl1 ? \"Photo uploaded\" : \"Choose a file\"}\n                </p>\n                <input\n                  onChange={(e) =>\n                    setFiles({ ...files, galleryImgUrl1: e.target.files[0] })\n                  }\n                  type=\"file\"\n                  id=\"add-title-image\"\n                  name=\"img\"\n                />\n              </article>\n              <article className={styles.button3}>\n                <p className={styles.choose_file}>\n                  {\" \"}\n                  {files.galleryImgUrl2 ? \"Photo uploaded\" : \"Choose a file\"}\n                </p>\n                <input\n                  onChange={(e) =>\n                    setFiles({ ...files, galleryImgUrl2: e.target.files[0] })\n                  }\n                  type=\"file\"\n                  id=\"add-title-image\"\n                  name=\"img\"\n                />\n              </article>\n              <article className={styles.button3}>\n                <p className={styles.choose_file}>\n                  {\" \"}\n                  {files.galleryImgUrl3 ? \"Photo uploaded\" : \"Choose a file\"}\n                </p>\n                <input\n                  onChange={(e) =>\n                    setFiles({ ...files, galleryImgUrl3: e.target.files[0] })\n                  }\n                  type=\"file\"\n                  id=\"add-title-image\"\n                  name=\"img\"\n                />\n              </article>\n\n              {(errors.galleryImgUrl1 ||\n                errors.galleryImgUrl2 ||\n                errors.galleryImgUrl3 ||\n                errors.profileImgUrl) && (\n                <span className={styles.errors_offer}>\n                  You must upload high quality photos\n                </span>\n              )}\n            </div>\n          </div>\n\n          <OfferTextaria\n            label=\"Contact info\"\n            name=\"contact\"\n            error={errors.contactInfo}\n            onChange={(e) => setInfo({ ...info, contactInfo: e.target.value })}\n          />\n\n          {loading && <LoadingDots />}\n\n          {!loading && (\n            <button type=\"submit\" className={styles.submit_offer}>\n              Submit\n            </button>\n          )}\n        </form>\n      </main>\n\n      <Footer class={style.footer_hobbie_details} />\n    </>\n  );\n};\n\nexport default CreateOffer;\n"]},"metadata":{},"sourceType":"module"}